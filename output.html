<!DOCTYPE html>
<html lang="en">
<head>
    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-153212172-1"></script>
    
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'UA-153212172-1');
    </script>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Let's talk water</title>
    <link rel="shortcut icon" type="image/png" href="./assets/favicon.png"/>
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js"></script>
    <script src="https://use.fontawesome.com/releases/v5.0.8/js/all.js"></script>
    
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">

    <script src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.js'></script>
    <link href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.5.0/mapbox-gl.css' rel='stylesheet' />
    <script src='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.min.js'></script>
    <link rel='stylesheet' href='https://api.mapbox.com/mapbox-gl-js/plugins/mapbox-gl-geocoder/v4.4.2/mapbox-gl-geocoder.css' type='text/css' />
    
    <!-- Promise polyfill script required to use Mapbox GL Geocoder in IE 11 -->
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/es6-promise@4/dist/es6-promise.auto.min.js"></script>

    <link href="./css/style.css" rel="stylesheet" />

    <!-- Include D3 for dataviz-->
    <script src="https://d3js.org/d3.v4.js"></script>

    <link href="https://fonts.googleapis.com/css?family=Lato|Roboto&display=swap" rel="stylesheet">

</head>
<body >

<!-- Navigation -->
<nav class="navbar navbar-expand-lg fixed-top navbar-dark bg-primary ">
    <a class="navbar-brand site-logo" href="index.html">
        <img src="./assets/logo_new.svg" width="32" height="32" class="d-inline-block align-top" alt="">
    </a>
    <a class="navbar-brand site-name" href="index.html">LET'S TALK WATER</a>
    <span class="navbar-brand site-separator">/</span>
    <span class="navbar-brand site-location">Location: Mambalam, Chennai, India</span>
    <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
        <ul class="navbar-nav ml-auto">
            <li class="nav-item mr-1">
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#exampleModal">
                    About
                </button>
            </li> 
            <li class="nav-item mr-1">
                <button type="button" class="btn btn-primary" data-toggle="modal" data-target="#assumptionsModal">
                    <i class="material-icons">info</i> Assumptions
                </button>
            </li>
            <li class="nav-item ml-1">
                <div class="dropdown">
                    <button class="btn btn-primary dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                        <i class="material-icons">language</i> En
                    </button>
                        <div class="dropdown-menu dropdown-menu-right" aria-labelledby="dropdownMenuButton">
                            <a class="dropdown-item" href="#">En</a>
                            <a class="dropdown-item" href="#">‡Æ§‡ÆÆ‡Æø‡Æ¥‡Øç</a>
                            <a class="dropdown-item" href="#">‡§π‡§ø‡§®‡•ç‡§¶‡•Ä</a>
                        </div>
                </div>
            </li>
        </ul>
    </div>
</nav>

<!-- Content <img src="./assets/gif.gif" alt="">  -->
<div class="container-fluid fill d-flex flex-column">
    <div class="row gr">
        <div class="col-md-6 colone">
            <div id="carouselExampleCaptions" class="carousel slide carcar" data-ride="carousel" data-interval="10000">
                <ol class="carousel-indicators">
                  <li data-target="#carouselExampleCaptions" data-slide-to="0" class="active"></li>
                  <li data-target="#carouselExampleCaptions" data-slide-to="1"></li>
                </ol>
                <div class="carousel-inner">
                  <div class="carousel-item active">
                    <img src="./assets/individual.gif" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">
                      <h5>RWH for an individual building</h5>
                    </div>
                  </div>
                  <div class="carousel-item">
                    <img src="./assets/apartment.gif" class="d-block w-100" alt="...">
                    <div class="carousel-caption d-none d-md-block">
                      <h5>RWH for an apartment building</h5>
                    </div>
                  </div>
                </div>
                <a class="carousel-control-prev" href="#carouselExampleCaptions" role="button" data-slide="prev">
                  <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                  <span class="sr-only">Previous</span>
                </a>
                <a class="carousel-control-next" href="#carouselExampleCaptions" role="button" data-slide="next">
                  <span class="carousel-control-next-icon" aria-hidden="true"></span>
                  <span class="sr-only">Next</span>
                </a>
              </div>
        </div>
        <div class="col-md-6 coltwo">
            <div class="container-fluid mt-3">
                <a class="btn btn-outline-primary back-button" href="./index.html#back" role="button"> <i class="material-icons">arrow_back</i> Go back</a>
            </div>
             <div class="container-fluid my-4">
                <div class="text-center my-4 mx-lg-3">
                    <h1><i class="material-icons md-40 strong-color">apartment</i>  Your building</h1>
                </div>
                
                <!-- Results get inserted here  -->
                <div class="mx-lg-3 px-lg-3 px-sm-3" id="compute_result"></div>

                <div class="mx-5 px-5 mt-3 float-right">
                    <p>üèóÔ∏è We can help you build this</p>
                    <a class="btn btn-lg btn-success float-right" target="_blank" href="https://airtable.com/shrTndI5rsTgFw3Jt" role="button">Contact us!</a> 
                </div>
        </div>
        </div>
    </div>
</div>

<!-- About Modal -->
<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog" aria-labelledby="exampleModalTitle" aria-hidden="false">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h2 class="modal-title" id="exampleModalTitle">Welcome to Let‚Äôs Talk Water Tool!</h2>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <p>
                    This is a rooftop rainwater harvesting calculator which provides you with information about the 
                    potential of rainwater harvesting (RWH) for your specific building to avoid water shortage in the 
                    summer and become water-sufficient. Most of the rainwater can be collected during the monsoon 
                    season and store for later usage. Be part of the ‚ÄòWater heroes‚Äô movement in Chennai and start 
                    saving water!
                </p>
                <p>
                    This tool is inspired by the effort of Shanta Sheela Nair, 
                    known as the water woman in Chennai who made RWH an important solution 
                    to cope with Chennai‚Äôs recurrent water crisis.
                </p>
                <p>
                  <b>Credits :</b> 
                </p>
                <div class="container-fluid my-3">
                    <img src="./assets/tu-delft-2.png" height="100" alt="">
                    <img src="./assets/tu-delft.png" height="100" alt="">
                    <img src="./assets/wal.jpg" height="100" alt="">
                    <img src="./assets/iit-madras.png" height="100" alt="">
                </div>
            </div>
            <div class="modal-footer">
              <button id="closeModal" type="button" class="btn btn-primary" data-dismiss="modal">Let's start</button>
            </div>
          </div>
        </div>
</div>

<!-- Assumptions Modal -->

<div class="modal fade" id="assumptionsModal" tabindex="-1" role="dialog" aria-labelledby="assumptionsModalTitle" aria-hidden="false">
        <div class="modal-dialog modal-dialog-scrollable modal-dialog-centered modal-lg" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h2 class="modal-title" id="assumptionsModalTitle">Assumptions and notes</h2>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body">
                <ol type="1">
                    <li>Daily rainfall data sourced from Indian Meteorological Department (IMD).</li>
                    <li>Actual rainwater collection is assumed at 75% of potential by considering runoff co-efficient, first flush, filter efficiency, etc.</li>
                    <li>The process calculation is based on the urban water balance model and does not take into account the evaporation factor as
                            rainwater collected from the rooftop is assumed to drain directly in the underground sump.</li>
                    <li>The RWH recommendations are based on the highest probability of occurrence over 46 years of historical rainfall data.</li>
                    <li>Underground sump capacity suggested is the optimum size from the given roof and number of residents of the building.</li>
                    <li>Groundwater recharge well capacity suggested considered the daily overflow volume from the underground tank.</li>
                    <li>The implementation of rooftop RWH system for household water supply requires a watertreatmentsystem for drinking water and
                            cooking, first flush system, filter chamber, piping and overhead tank.</li>
                    <li>It is advisable to test periodically the quality of rainwater in the underground sump.</li>
                    <li>This tool is for residential buildings, apartments and individual houses with a flat roof.</li>
                    <li>Daily water consumption per person for Chennai varies between 40l/d/c to 135l/d/c.</li>
                    <li>List of RWH Contractors, Entrepreneurs, Agencies, Equipment suppliers, Manufacturers and any Organizations listed in this tool are
                            from the public domain information and are not the recommended/endorsed list of their capabilities/authenticity/financial
                            transactions.</li>
                </ol>
            </div>
            <div class="modal-footer">
              <button id="closeModal" type="button" class="btn btn-primary" data-dismiss="modal">I understand</button>
            </div>
          </div>
        </div>
</div>

<!-- Positive result template -->

<script id="resultTemplate" type="text/html">
  <p><span>Suggested underground sump capacity: </span><b><span id="sump_capacity" class="results"> {{sump_capacity}} </span><span class="results"> m<sup>3</sup></span></b></p>
  <p><span>No. of days per year that can be supplied only by rooftop RWH: </span><b><span id="no_day" class="results"> {{no_days}} </span><span class="results"> d/yr</span></b></p>
  <p><span>No. of days per year which require external water supply: </span><b><span id="no_day_ext" class="results"> {{no_days_ext}} </span><span class="results"> d/yr</span></b></p>
  <p><span>No. of days per year rainwater in the underground sump overflows: </span><b><span id="no_day_overflow" class="results"><i>work in progress</i></span><span class="results"><!-- d/yr</span> --></b></p>
  <p>
      <a class="btn btn-outline-secondary" id="graphToggle" onclick="draw_graph()" data-toggle="collapse" href="#collapseExample" role="button" aria-expanded="false" aria-controls="collapseExample">
        <i class="material-icons">bar_chart</i> See more info
      </a>
      <!--
      <button type="button" class="btn btn-outline-secondary">
        <i class="material-icons">save_alt</i> Download report
      </button>
      <button type="button" class="btn btn-outline-secondary">
        <i class="material-icons">share</i> Share app
      </button>
      -->
  </p>
  <div class="collapse" id="collapseExample">
         <div class="card card-body">
             <div id="my_dataviz"></div>
             <p class="my-3 dataviz-explanation text-center"> üîç Brush the chart to zoom. üñ±Ô∏è Double click to re-initialize.</p>
         </div>
  </div>
</script>

<!-- No optimum result template -->
<script id="no_resultTemplate" type="text/html">
  <p> No optimum was found. Your case is a bit more tricky. To learn more about the available options for you, we advise you to contact us directly using the form bellow!</p>
</script>

<script src="https://cdnjs.cloudflare.com/ajax/libs/mustache.js/3.0.1/mustache.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/qs/6.6.0/qs.min.js"></script>
<script src="./js/waterLogic.js"> </script>
<script src="./js/dataviz.js"> </script>

</body>
</html>